"use strict";(self.webpackChunkgiveth_docs=self.webpackChunkgiveth_docs||[]).push([[6248],{7904:(e,a,o)=>{o.d(a,{Ay:()=>t,RM:()=>i});var r=o(4848),s=o(8453);const i=[];function n(e){const a={a:"a",em:"em",hr:"hr",p:"p",strong:"strong",...(0,s.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(a.p,{children:(0,r.jsx)(a.strong,{children:(0,r.jsxs)(a.em,{children:["Giveth TRACE foi oficialmente descontinuado. Depois de 5 anos de servi\xe7os, Giveth e suas plataformas, servi\xe7os e produtos migraram totalmente para ",(0,r.jsx)(a.a,{href:"https://giveth.io/",children:"Giveth.io"}),". Com a descontinua\xe7\xe3o da rede Rinkeby e a baixa frequ\xeancia de usu\xe1rios, o Giveth DAO decidiu encerrar seu dApp original no terceiro trimestre de 2022. O c\xf3digo \xe9 e sempre ser\xe1 aberto. Voc\xea pode encontr\xe1-lo nestes ",(0,r.jsx)(a.a,{href:"https://github.com/Giveth",children:"reposit\xf3rios do Github"}),"."]})})}),"\n",(0,r.jsx)(a.p,{children:(0,r.jsx)(a.strong,{children:(0,r.jsx)(a.em,{children:"Toda a documenta\xe7\xe3o do Giveth TRACE vai permanecer dispon\xedvel para refer\xeancia hist\xf3rica."})})}),"\n",(0,r.jsx)(a.hr,{})]})}function t(e={}){const{wrapper:a}={...(0,s.R)(),...e.components};return a?(0,r.jsx)(a,{...e,children:(0,r.jsx)(n,{...e})}):n(e)}},3881:(e,a,o)=>{o.r(a),o.d(a,{assets:()=>p,contentTitle:()=>c,default:()=>l,frontMatter:()=>d,metadata:()=>r,toc:()=>u});const r=JSON.parse('{"id":"bridgeSecurity","title":"Implementa\xe7\xe3o de seguran\xe7a da Giveth Bridge","description":"Uma vis\xe3o t\xe9cnica geral dos recursos, fun\xe7\xf5es e teoria por tr\xe1s da seguran\xe7a da Giveth Bridge.","source":"@site/i18n/pt/docusaurus-plugin-content-docs-dapps/current/bridgeSecurity.md","sourceDirName":".","slug":"/dapps/bridgeSecurity","permalink":"/pt/dapps/bridgeSecurity","draft":false,"unlisted":false,"editUrl":"https://github.com/giveth/giveth-docs/edit/master/dapps/bridgeSecurity.md","tags":[],"version":"current","lastUpdatedBy":"Mitch Oz","lastUpdatedAt":1667574492000,"frontMatter":{"id":"bridgeSecurity","title":"Implementa\xe7\xe3o de seguran\xe7a da Giveth Bridge","slug":"dapps/bridgeSecurity"}}');var s=o(4848),i=o(8453),n=o(6025),t=o(7904);const d={id:"bridgeSecurity",title:"Implementa\xe7\xe3o de seguran\xe7a da Giveth Bridge",slug:"dapps/bridgeSecurity"},c=void 0,p={},u=[...t.RM,{value:"Uma vis\xe3o t\xe9cnica geral dos recursos, fun\xe7\xf5es e teoria por tr\xe1s da seguran\xe7a da Giveth Bridge.",id:"uma-vis\xe3o-t\xe9cnica-geral-dos-recursos-fun\xe7\xf5es-e-teoria-por-tr\xe1s-da-seguran\xe7a-da-giveth-bridge",level:4},{value:"O que \xe9 a Giveth Bridge, exatamente?",id:"o-que-\xe9-a-giveth-bridge-exatamente",level:3},{value:"Como isso funciona?",id:"como-isso-funciona",level:3},{value:"Fun\xe7\xf5es de seguran\xe7a",id:"fun\xe7\xf5es-de-seguran\xe7a",level:2},{value:"Propriet\xe1rio da Mainnet",id:"propriet\xe1rio-da-mainnet",level:3},{value:"Financiamento da Mainnet e Destino do EscapeHatch",id:"financiamento-da-mainnet-e-destino-do-escapehatch",level:3},{value:"Security Guard",id:"security-guard",level:3},{value:"Mainnet EscapeHatchCaller",id:"mainnet-escapehatchcaller",level:3},{value:"Gastos Permitidos",id:"gastos-permitidos",level:3},{value:"Propriet\xe1rio do ForeignGivethBridge",id:"propriet\xe1rio-do-foreigngivethbridge",level:3},{value:"Rinkeby DappGod Multisig",id:"rinkeby-dappgod-multisig",level:3},{value:"Rinkeby EscapeHatchCaller",id:"rinkeby-escapehatchcaller",level:3},{value:"Poss\xedveis cen\xe1rios de problemas de seguran\xe7a",id:"poss\xedveis-cen\xe1rios-de-problemas-de-seguran\xe7a",level:2}];function m(e){const a={code:"code",em:"em",h2:"h2",h3:"h3",h4:"h4",p:"p",strong:"strong",...(0,i.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(t.Ay,{}),"\n",(0,s.jsx)(a.h4,{id:"uma-vis\xe3o-t\xe9cnica-geral-dos-recursos-fun\xe7\xf5es-e-teoria-por-tr\xe1s-da-seguran\xe7a-da-giveth-bridge",children:"Uma vis\xe3o t\xe9cnica geral dos recursos, fun\xe7\xf5es e teoria por tr\xe1s da seguran\xe7a da Giveth Bridge."}),"\n",(0,s.jsx)(a.p,{children:(0,s.jsx)(a.em,{children:"Esse documento pressup\xf5e que o leitor tenha conhecimento b\xe1sico de contratos inteligentes, contratos multisig e cadeias de rede de teste Ethereum."})}),"\n",(0,s.jsx)(a.h3,{id:"o-que-\xe9-a-giveth-bridge-exatamente",children:"O que \xe9 a Giveth Bridge, exatamente?"}),"\n",(0,s.jsx)(a.p,{children:"A Bridge tem 3 partes: um contrato na Ethereum Mainnet, um contrato na Rinkeby Testnet e um servi\xe7o off-chain que conecta esses dois contratos. O servi\xe7o off-chain escuta eventos desses contratos e retransmite comandos de um contrato para outro."}),"\n",(0,s.jsx)("img",{id:"contentimg",alt:"Giveth TRACE Bridge Flow",src:(0,n.Ay)("img/content/trace/givethbridge.png")}),"\n",(0,s.jsx)(a.h3,{id:"como-isso-funciona",children:"Como isso funciona?"}),"\n",(0,s.jsx)(a.p,{children:"O contrato da Giveth Bridge na rede principal \xe9 simplesmente um contrato de cofre com 1 medida de seguran\xe7a extra e algumas modifica\xe7\xf5es para que funcione como uma bridge. Os pagamentos s\xe3o pagos apenas sob certas condi\xe7\xf5es. Todo bridge-payment tem um bloqueio padr\xe3o de 48 horas antes que o pagamento possa ocorrer."}),"\n",(0,s.jsx)(a.p,{children:"Durante esse per\xedodo, o Security Guard tem a capacidade de atrasar um pagamento al\xe9m do padr\xe3o de 48 horas - at\xe9 30 dias. Isso permite tempo para determinar se um pagamento precisa ou n\xe3o ser cancelado. Nenhum pagamento pode ser emitido sem que o check-in do Security Guard ocorra XX minutos ap\xf3s o pagamento ter sido solicitado. Este check-in ser\xe1 di\xe1rio para n\xe3o atrasar os pagamentos autorizados."}),"\n",(0,s.jsxs)(a.p,{children:["H\xe1 tamb\xe9m um ",(0,s.jsx)(a.code,{children:"escapeHatch"})," que pode ser chamado por um ",(0,s.jsx)(a.code,{children:"escapeHatchCaller"})," para enviar os fundos da bridge para o multisig de financiamento durante o atraso de 48 horas, ou qualquer atraso adicional gerado pelo Security Guard."]}),"\n",(0,s.jsxs)(a.p,{children:["Este financiamento multisig ir\xe1 por algum tempo tamb\xe9m manter fundos para diversificar o risco entre o contrato Bridge e o contrato Consensus Multisig. Quando a bridge estiver segurando muito valor, o financiamento multisig ir\xe1 ",(0,s.jsx)(a.code,{children:"escapeFunds()"})," para fora da bridge e quando estiver ficado baixa, o multisig de financiamento o completar\xe1 manualmente."]}),"\n",(0,s.jsx)(a.p,{children:"Doa\xe7\xf5es e retiradas acontecer\xe3o diretamente da bridge. Quando uma doa\xe7\xe3o \xe9 feita para a bridge, um token \xe9 criado pela TokenFactory (a 1:1 ETH) e enviado para LiquidPledge, onde s\xe3o tomadas as decis\xf5es sobre os gastos. Quando um pagamento \xe9 solicitado, os tokens s\xe3o enviados da Liquid Pledging e queimados pelo ForeignGivethBridge, momento em que o comando \xe9 emitido de volta pela Ghetto Bridge usando a Bridge Key para a Giveth Bridge emitir um pagamento."}),"\n",(0,s.jsx)(a.p,{children:"Caso por algum motivo a bridge caia, o servi\xe7o listener emitir\xe1 alarmes para notificar a interrup\xe7\xe3o do servi\xe7o. O servi\xe7o listener tamb\xe9m criar\xe1 um alarme se os tokens forem criados sem uma doa\xe7\xe3o correspondente ou se os tokens n\xe3o forem criados no momento de uma doa\xe7\xe3o."}),"\n",(0,s.jsx)(a.h2,{id:"fun\xe7\xf5es-de-seguran\xe7a",children:"Fun\xe7\xf5es de seguran\xe7a"}),"\n",(0,s.jsx)(a.h3,{id:"propriet\xe1rio-da-mainnet",children:"Propriet\xe1rio da Mainnet"}),"\n",(0,s.jsx)(a.p,{children:"Esse \xe9 o multisig da Giveth que pode emitir comandos de controle para a ponte. Eles podem cancelar qualquer pagamento e podem inicializar o Security Guard ou remover o gastador aprovado (chave de ponte)."}),"\n",(0,s.jsx)(a.h3,{id:"financiamento-da-mainnet-e-destino-do-escapehatch",children:"Financiamento da Mainnet e Destino do EscapeHatch"}),"\n",(0,s.jsx)(a.p,{children:"A multisig \xe9 usada para enviar fundos para a Mainnet Bridge (cofre) e atuar como destino para a EscapeHatch Call."}),"\n",(0,s.jsx)(a.h3,{id:"security-guard",children:"Security Guard"}),"\n",(0,s.jsx)(a.p,{children:"Vigia todos os pagamentos solicitados, verifica todos os dias e atrasa pagamentos suspeitos."}),"\n",(0,s.jsx)(a.h3,{id:"mainnet-escapehatchcaller",children:"Mainnet EscapeHatchCaller"}),"\n",(0,s.jsx)(a.p,{children:"Esse \xe9 um multisig 1 de x que pode acionar o cofre para despejar seus fundos em uma carteira predeterminada. Temos pessoas espalhadas pelo mundo, v\xe1rios pontos de contato que podem fazer isso."}),"\n",(0,s.jsx)(a.h3,{id:"gastos-permitidos",children:"Gastos Permitidos"}),"\n",(0,s.jsx)(a.p,{children:"Esses endere\xe7os s\xe3o uma lista branca que pode emitir uma solicita\xe7\xe3o de pagamento para o bridge-contract. No aplicativo, a chave da bridge \xe9 o \xfanico Gastador permitido."}),"\n",(0,s.jsx)(a.h3,{id:"propriet\xe1rio-do-foreigngivethbridge",children:"Propriet\xe1rio do ForeignGivethBridge"}),"\n",(0,s.jsx)(a.p,{children:"A Bridge key"}),"\n",(0,s.jsx)(a.h3,{id:"rinkeby-dappgod-multisig",children:"Rinkeby DappGod Multisig"}),"\n",(0,s.jsxs)(a.p,{children:["Esse multisig controla as atualiza\xe7\xf5es e tem total acesso para controlar o ForeignGivethBridge. Ele tamb\xe9m atua como",(0,s.jsx)(a.code,{children:"escapeHatchDestination"})," para o ForeignGivethBridge e Liquid Pledge."]}),"\n",(0,s.jsx)(a.h3,{id:"rinkeby-escapehatchcaller",children:"Rinkeby EscapeHatchCaller"}),"\n",(0,s.jsx)(a.p,{children:"Esse \xe9 um multisig 1 de x que pode acionar os contratos ForeignGivethBridge e Liquid Pledge para despejar seus tokens em uma carteira predeterminada."}),"\n",(0,s.jsx)(a.h2,{id:"poss\xedveis-cen\xe1rios-de-problemas-de-seguran\xe7a",children:"Poss\xedveis cen\xe1rios de problemas de seguran\xe7a"}),"\n",(0,s.jsx)(a.p,{children:(0,s.jsx)(a.strong,{children:"A Bridge Key est\xe1 comprometida:"})}),"\n",(0,s.jsx)(a.p,{children:"Um hacker pode usar a chave da bridge para criar transa\xe7\xf5es enviando ETH para seu pr\xf3prio endere\xe7o para for\xe7ar as transa\xe7\xf5es. O Security Guard pode atrasar esses pagamentos por tempo suficiente para que o multisig do propriet\xe1rio cancele o pagamento e remova a chave comprometida na Mainnet."}),"\n",(0,s.jsx)(a.p,{children:"Eles tamb\xe9m podem criar tokens GiveETH como o controlador de token no lado rinkeby. O servi\xe7o de listener pegaria isso e soaria o alarme sempre que os tokens GiveETH fossem gerados sem uma doa\xe7\xe3o de Ether correspondente. (tamb\xe9m soa um alarme se o servi\xe7o de chave da bridge decidir tirar uma soneca e n\xe3o criar tokens GiveETH quando uma doa\xe7\xe3o for recebida.)"}),"\n",(0,s.jsx)(a.p,{children:(0,s.jsx)(a.strong,{children:"O propriet\xe1rio multisig tem um bug e pode ser assumido (como o hack de paridade) ou 6 chaves de 11 das chaves est\xe3o comprometidas:"})}),"\n",(0,s.jsx)(a.p,{children:"Isso \xe9 altamente improv\xe1vel, mas se isso acontecer, n\xe3o haver\xe1 perda de fundos. Esse multisig n\xe3o possui fundos, apenas controla a bridge. Tt poderia reduzir o atraso de 48 horas para 25 horas, o security guard ainda pode atrasar quaisquer pagamentos, mas ele pode ser substitu\xeddo pelo propriet\xe1rio. Os fundos podem ser retirados dentro de 25 horas nesse cen\xe1rio."}),"\n",(0,s.jsx)(a.p,{children:(0,s.jsx)(a.strong,{children:"As chaves EscapeHatchCaller s\xe3o comprometidas:"})}),"\n",(0,s.jsx)(a.p,{children:"Nesse caso, a pior coisa que pode acontecer \xe9 que o fluxo do DApp no Rinkeby possa ser interrompido. No entanto, isso pode ser reparado removendo a chave comprometida no EscapeHatch 1 de x multisig e DAppGod. Feito isso, basta enviar os tokens giveth de volta para o endere\xe7o de onde vieram, um cen\xe1rio semelhante \xe9 poss\xedvel na Mainnet. O EscapeHatch Caller s\xf3 pode mover dinheiro para um destino de fuga e para nenhum outro lugar. Se uma chave estiver comprometida, a pior coisa que eles podem fazer \xe9 remover todos os propriet\xe1rios e eles mesmos da multisig do EscapeHatch, mas o propriet\xe1rio 6 de 11 multisig na rede principal ainda pode chamar o EscapeHatch e substituir o chamador do EscapeHatch e o multisig 3 de 5 no rinkeby tamb\xe9m pode."}),"\n",(0,s.jsx)(a.p,{children:(0,s.jsx)(a.strong,{children:"O financiamento multisig tem um bug e pode ser assumido (como o hack de paridade) ou 4 chaves de 7 das chaves est\xe3o comprometidas:"})}),"\n",(0,s.jsx)(a.p,{children:"Isso \xe9 extremamente improv\xe1vel, mas se isso acontecer, haver\xe1 uma perda de fundos. A perda, no entanto, n\xe3o seria catastr\xf3fica, pois os fundos s\xe3o divididos entre a bridge e o multisig."}),"\n",(0,s.jsx)(a.p,{children:(0,s.jsx)(a.strong,{children:"O Bridge na mainnet tem um bug que permite que outra pessoa assuma o controle:"})}),"\n",(0,s.jsx)(a.p,{children:"O atraso de 48 horas s\xf3 pode ser reduzido para 25 horas. O Security Guard ainda pode  atrasar quaisquer pagamentos, mas ele pode ser substitu\xeddo pelo propriet\xe1rio. Os fundos podem ser escapados dentro de 25 horas nesse cen\xe1rio."}),"\n",(0,s.jsx)(a.p,{children:(0,s.jsx)(a.strong,{children:"DAppGod Multisig na testnet decide assumir:"})}),"\n",(0,s.jsx)(a.p,{children:"Se isso ocorrer, o EscapeHatch da bridge evitar\xe1 qualquer perda de fundos e a configura\xe7\xe3o da testnet poder\xe1 ser reimplantada manualmente."}),"\n",(0,s.jsxs)(a.p,{children:[(0,s.jsx)(a.strong,{children:"E se a chave do Security Guard e a Bridge Key Controller forem comprometidos (ou seus detentores conspirarem para roubar fundos)"}),":"]}),"\n",(0,s.jsx)(a.p,{children:"O propriet\xe1rio multisig pode cancelar pagamentos e estender o atraso para mais de 48 horas. Por\xe9m, eles provavelmente n\xe3o precisariam porque os fundos da bridge podem ser escapados para o multisig de financiamento. Esse \xe9 o \xfanico cen\xe1rio que pode ser um risco s\xe9rio para os fundos no cofre da bridge. Isso pode ser evitado dentro de 48 horas ap\xf3s o in\xedcio do evento devido ao atraso padr\xe3o. Os fundos podem ser escapados durante esse per\xedodo."}),"\n",(0,s.jsx)(a.p,{children:(0,s.jsx)(a.strong,{children:"Por fim, o que acontece se o Event Listener ficar off-line imediatamente antes de qualquer um dos ataques mencionados acima que acionam alarmes no comprometimento?"})}),"\n",(0,s.jsx)(a.p,{children:"O Security Guard deve ver quaisquer transa\xe7\xf5es suspeitas e ser capaz de atrasar os pagamentos at\xe9 que sejam resolvidos."})]})}function l(e={}){const{wrapper:a}={...(0,i.R)(),...e.components};return a?(0,s.jsx)(a,{...e,children:(0,s.jsx)(m,{...e})}):m(e)}},8453:(e,a,o)=>{o.d(a,{R:()=>n,x:()=>t});var r=o(6540);const s={},i=r.createContext(s);function n(e){const a=r.useContext(i);return r.useMemo((function(){return"function"==typeof e?e(a):{...a,...e}}),[a,e])}function t(e){let a;return a=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:n(e.components),r.createElement(i.Provider,{value:a},e.children)}}}]);