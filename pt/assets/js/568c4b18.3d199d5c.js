"use strict";(self.webpackChunkgiveth_docs=self.webpackChunkgiveth_docs||[]).push([[2756],{3905:(e,a,o)=>{o.d(a,{Zo:()=>u,kt:()=>l});var r=o(7294);function t(e,a,o){return a in e?Object.defineProperty(e,a,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[a]=o,e}function i(e,a){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);a&&(r=r.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),o.push.apply(o,r)}return o}function s(e){for(var a=1;a<arguments.length;a++){var o=null!=arguments[a]?arguments[a]:{};a%2?i(Object(o),!0).forEach((function(a){t(e,a,o[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):i(Object(o)).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(o,a))}))}return e}function n(e,a){if(null==e)return{};var o,r,t=function(e,a){if(null==e)return{};var o,r,t={},i=Object.keys(e);for(r=0;r<i.length;r++)o=i[r],a.indexOf(o)>=0||(t[o]=e[o]);return t}(e,a);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)o=i[r],a.indexOf(o)>=0||Object.prototype.propertyIsEnumerable.call(e,o)&&(t[o]=e[o])}return t}var d=r.createContext({}),p=function(e){var a=r.useContext(d),o=a;return e&&(o="function"==typeof e?e(a):s(s({},a),e)),o},u=function(e){var a=p(e.components);return r.createElement(d.Provider,{value:a},e.children)},c={inlineCode:"code",wrapper:function(e){var a=e.children;return r.createElement(r.Fragment,{},a)}},m=r.forwardRef((function(e,a){var o=e.components,t=e.mdxType,i=e.originalType,d=e.parentName,u=n(e,["components","mdxType","originalType","parentName"]),m=p(o),l=t,g=m["".concat(d,".").concat(l)]||m[l]||c[l]||i;return o?r.createElement(g,s(s({ref:a},u),{},{components:o})):r.createElement(g,s({ref:a},u))}));function l(e,a){var o=arguments,t=a&&a.mdxType;if("string"==typeof e||t){var i=o.length,s=new Array(i);s[0]=m;var n={};for(var d in a)hasOwnProperty.call(a,d)&&(n[d]=a[d]);n.originalType=e,n.mdxType="string"==typeof e?e:t,s[1]=n;for(var p=2;p<i;p++)s[p]=o[p];return r.createElement.apply(null,s)}return r.createElement.apply(null,o)}m.displayName="MDXCreateElement"},6964:(e,a,o)=>{o.r(a),o.d(a,{assets:()=>p,contentTitle:()=>n,default:()=>m,frontMatter:()=>s,metadata:()=>d,toc:()=>u});var r=o(7462),t=(o(7294),o(3905)),i=o(4996);const s={id:"bridgeSecurity",title:"Implementa\xe7\xe3o de seguran\xe7a da Giveth Bridge",slug:"dapps/bridgeSecurity"},n=void 0,d={unversionedId:"bridgeSecurity",id:"bridgeSecurity",title:"Implementa\xe7\xe3o de seguran\xe7a da Giveth Bridge",description:"Uma vis\xe3o t\xe9cnica geral dos recursos, fun\xe7\xf5es e teoria por tr\xe1s da seguran\xe7a da Giveth Bridge.",source:"@site/i18n/pt/docusaurus-plugin-content-docs-dapps/current/bridgeSecurity.md",sourceDirName:".",slug:"/dapps/bridgeSecurity",permalink:"/pt/dapps/bridgeSecurity",draft:!1,editUrl:"https://github.com/giveth/giveth-docs/edit/master/dapps/bridgeSecurity.md",tags:[],version:"current",lastUpdatedBy:"mrbear",lastUpdatedAt:1651518279,formattedLastUpdatedAt:"2 de mai. de 2022",frontMatter:{id:"bridgeSecurity",title:"Implementa\xe7\xe3o de seguran\xe7a da Giveth Bridge",slug:"dapps/bridgeSecurity"},sidebar:"dapps",previous:{title:"Instalando Giveth TRACE para Desenvolvimento Local",permalink:"/pt/dapps/TRACEinstallation"},next:{title:"Processo de Desenvolvimento",permalink:"/pt/dapps/developmentProcess"}},p={},u=[{value:"Uma vis\xe3o t\xe9cnica geral dos recursos, fun\xe7\xf5es e teoria por tr\xe1s da seguran\xe7a da Giveth Bridge.",id:"uma-vis\xe3o-t\xe9cnica-geral-dos-recursos-fun\xe7\xf5es-e-teoria-por-tr\xe1s-da-seguran\xe7a-da-giveth-bridge",level:4},{value:"O que \xe9 a Giveth Bridge, exatamente?",id:"o-que-\xe9-a-giveth-bridge-exatamente",level:3},{value:"Como isso funciona?",id:"como-isso-funciona",level:3},{value:"Fun\xe7\xf5es de seguran\xe7a",id:"fun\xe7\xf5es-de-seguran\xe7a",level:2},{value:"Propriet\xe1rio da Mainnet",id:"propriet\xe1rio-da-mainnet",level:3},{value:"Financiamento da Mainnet e Destino do EscapeHatch",id:"financiamento-da-mainnet-e-destino-do-escapehatch",level:3},{value:"Security Guard",id:"security-guard",level:3},{value:"Mainnet EscapeHatchCaller",id:"mainnet-escapehatchcaller",level:3},{value:"Gastos Permitidos",id:"gastos-permitidos",level:3},{value:"Propriet\xe1rio do ForeignGivethBridge",id:"propriet\xe1rio-do-foreigngivethbridge",level:3},{value:"Rinkeby DappGod Multisig",id:"rinkeby-dappgod-multisig",level:3},{value:"Rinkeby EscapeHatchCaller",id:"rinkeby-escapehatchcaller",level:3},{value:"Poss\xedveis cen\xe1rios de problemas de seguran\xe7a",id:"poss\xedveis-cen\xe1rios-de-problemas-de-seguran\xe7a",level:2}],c={toc:u};function m(e){let{components:a,...o}=e;return(0,t.kt)("wrapper",(0,r.Z)({},c,o,{components:a,mdxType:"MDXLayout"}),(0,t.kt)("h4",{id:"uma-vis\xe3o-t\xe9cnica-geral-dos-recursos-fun\xe7\xf5es-e-teoria-por-tr\xe1s-da-seguran\xe7a-da-giveth-bridge"},"Uma vis\xe3o t\xe9cnica geral dos recursos, fun\xe7\xf5es e teoria por tr\xe1s da seguran\xe7a da Giveth Bridge."),(0,t.kt)("p",null,(0,t.kt)("em",{parentName:"p"},"Esse documento pressup\xf5e que o leitor tenha conhecimento b\xe1sico de contratos inteligentes, contratos multisig e cadeias de rede de teste Ethereum.")),(0,t.kt)("h3",{id:"o-que-\xe9-a-giveth-bridge-exatamente"},"O que \xe9 a Giveth Bridge, exatamente?"),(0,t.kt)("p",null,"A Bridge tem 3 partes: um contrato na Ethereum Mainnet, um contrato na Rinkeby Testnet e um servi\xe7o off-chain que conecta esses dois contratos. O servi\xe7o off-chain escuta eventos desses contratos e retransmite comandos de um contrato para outro."),(0,t.kt)("img",{id:"contentimg",alt:"Giveth TRACE Bridge Flow",src:(0,i.Z)("img/content/trace/givethbridge.png")}),(0,t.kt)("h3",{id:"como-isso-funciona"},"Como isso funciona?"),(0,t.kt)("p",null,"O contrato da Giveth Bridge na rede principal \xe9 simplesmente um contrato de cofre com 1 medida de seguran\xe7a extra e algumas modifica\xe7\xf5es para que funcione como uma bridge. Os pagamentos s\xe3o pagos apenas sob certas condi\xe7\xf5es. Todo bridge-payment tem um bloqueio padr\xe3o de 48 horas antes que o pagamento possa ocorrer."),(0,t.kt)("p",null,"Durante esse per\xedodo, o Security Guard tem a capacidade de atrasar um pagamento al\xe9m do padr\xe3o de 48 horas - at\xe9 30 dias. Isso permite tempo para determinar se um pagamento precisa ou n\xe3o ser cancelado. Nenhum pagamento pode ser emitido sem que o check-in do Security Guard ocorra XX minutos ap\xf3s o pagamento ter sido solicitado. Este check-in ser\xe1 di\xe1rio para n\xe3o atrasar os pagamentos autorizados."),(0,t.kt)("p",null,"H\xe1 tamb\xe9m um ",(0,t.kt)("inlineCode",{parentName:"p"},"escapeHatch")," que pode ser chamado por um ",(0,t.kt)("inlineCode",{parentName:"p"},"escapeHatchCaller")," para enviar os fundos da bridge para o multisig de financiamento durante o atraso de 48 horas, ou qualquer atraso adicional gerado pelo Security Guard."),(0,t.kt)("p",null,"Este financiamento multisig ir\xe1 por algum tempo tamb\xe9m manter fundos para diversificar o risco entre o contrato Bridge e o contrato Consensus Multisig. Quando a bridge estiver segurando muito valor, o financiamento multisig ir\xe1 ",(0,t.kt)("inlineCode",{parentName:"p"},"escapeFunds()")," para fora da bridge e quando estiver ficado baixa, o multisig de financiamento o completar\xe1 manualmente."),(0,t.kt)("p",null,"Doa\xe7\xf5es e retiradas acontecer\xe3o diretamente da bridge. Quando uma doa\xe7\xe3o \xe9 feita para a bridge, um token \xe9 criado pela TokenFactory (a 1:1 ETH) e enviado para LiquidPledge, onde s\xe3o tomadas as decis\xf5es sobre os gastos. Quando um pagamento \xe9 solicitado, os tokens s\xe3o enviados da Liquid Pledging e queimados pelo ForeignGivethBridge, momento em que o comando \xe9 emitido de volta pela Ghetto Bridge usando a Bridge Key para a Giveth Bridge emitir um pagamento."),(0,t.kt)("p",null,"Caso por algum motivo a bridge caia, o servi\xe7o listener emitir\xe1 alarmes para notificar a interrup\xe7\xe3o do servi\xe7o. O servi\xe7o listener tamb\xe9m criar\xe1 um alarme se os tokens forem criados sem uma doa\xe7\xe3o correspondente ou se os tokens n\xe3o forem criados no momento de uma doa\xe7\xe3o."),(0,t.kt)("h2",{id:"fun\xe7\xf5es-de-seguran\xe7a"},"Fun\xe7\xf5es de seguran\xe7a"),(0,t.kt)("h3",{id:"propriet\xe1rio-da-mainnet"},"Propriet\xe1rio da Mainnet"),(0,t.kt)("p",null,"Esse \xe9 o multisig da Giveth que pode emitir comandos de controle para a ponte. Eles podem cancelar qualquer pagamento e podem inicializar o Security Guard ou remover o gastador aprovado (chave de ponte)."),(0,t.kt)("h3",{id:"financiamento-da-mainnet-e-destino-do-escapehatch"},"Financiamento da Mainnet e Destino do EscapeHatch"),(0,t.kt)("p",null,"A multisig \xe9 usada para enviar fundos para a Mainnet Bridge (cofre) e atuar como destino para a EscapeHatch Call."),(0,t.kt)("h3",{id:"security-guard"},"Security Guard"),(0,t.kt)("p",null,"Vigia todos os pagamentos solicitados, verifica todos os dias e atrasa pagamentos suspeitos."),(0,t.kt)("h3",{id:"mainnet-escapehatchcaller"},"Mainnet EscapeHatchCaller"),(0,t.kt)("p",null,"Esse \xe9 um multisig 1 de x que pode acionar o cofre para despejar seus fundos em uma carteira predeterminada. Temos pessoas espalhadas pelo mundo, v\xe1rios pontos de contato que podem fazer isso."),(0,t.kt)("h3",{id:"gastos-permitidos"},"Gastos Permitidos"),(0,t.kt)("p",null,"Esses endere\xe7os s\xe3o uma lista branca que pode emitir uma solicita\xe7\xe3o de pagamento para o bridge-contract. No aplicativo, a chave da bridge \xe9 o \xfanico Gastador permitido."),(0,t.kt)("h3",{id:"propriet\xe1rio-do-foreigngivethbridge"},"Propriet\xe1rio do ForeignGivethBridge"),(0,t.kt)("p",null,"A Bridge key "),(0,t.kt)("h3",{id:"rinkeby-dappgod-multisig"},"Rinkeby DappGod Multisig"),(0,t.kt)("p",null,"Esse multisig controla as atualiza\xe7\xf5es e tem total acesso para controlar o ForeignGivethBridge. Ele tamb\xe9m atua como",(0,t.kt)("inlineCode",{parentName:"p"},"escapeHatchDestination")," para o ForeignGivethBridge e Liquid Pledge."),(0,t.kt)("h3",{id:"rinkeby-escapehatchcaller"},"Rinkeby EscapeHatchCaller"),(0,t.kt)("p",null,"Esse \xe9 um multisig 1 de x que pode acionar os contratos ForeignGivethBridge e Liquid Pledge para despejar seus tokens em uma carteira predeterminada."),(0,t.kt)("h2",{id:"poss\xedveis-cen\xe1rios-de-problemas-de-seguran\xe7a"},"Poss\xedveis cen\xe1rios de problemas de seguran\xe7a"),(0,t.kt)("p",null,(0,t.kt)("strong",{parentName:"p"},"A Bridge Key est\xe1 comprometida:")),(0,t.kt)("p",null,"Um hacker pode usar a chave da bridge para criar transa\xe7\xf5es enviando ETH para seu pr\xf3prio endere\xe7o para for\xe7ar as transa\xe7\xf5es. O Security Guard pode atrasar esses pagamentos por tempo suficiente para que o multisig do propriet\xe1rio cancele o pagamento e remova a chave comprometida na Mainnet."),(0,t.kt)("p",null,"Eles tamb\xe9m podem criar tokens GiveETH como o controlador de token no lado rinkeby. O servi\xe7o de listener pegaria isso e soaria o alarme sempre que os tokens GiveETH fossem gerados sem uma doa\xe7\xe3o de Ether correspondente. (tamb\xe9m soa um alarme se o servi\xe7o de chave da bridge decidir tirar uma soneca e n\xe3o criar tokens GiveETH quando uma doa\xe7\xe3o for recebida.)"),(0,t.kt)("p",null,(0,t.kt)("strong",{parentName:"p"},"O propriet\xe1rio multisig tem um bug e pode ser assumido (como o hack de paridade) ou 6 chaves de 11 das chaves est\xe3o comprometidas:")),(0,t.kt)("p",null,"Isso \xe9 altamente improv\xe1vel, mas se isso acontecer, n\xe3o haver\xe1 perda de fundos. Esse multisig n\xe3o possui fundos, apenas controla a bridge. Tt poderia reduzir o atraso de 48 horas para 25 horas, o security guard ainda pode atrasar quaisquer pagamentos, mas ele pode ser substitu\xeddo pelo propriet\xe1rio. Os fundos podem ser retirados dentro de 25 horas nesse cen\xe1rio."),(0,t.kt)("p",null,(0,t.kt)("strong",{parentName:"p"},"As chaves EscapeHatchCaller s\xe3o comprometidas:")),(0,t.kt)("p",null,"Nesse caso, a pior coisa que pode acontecer \xe9 que o fluxo do DApp no Rinkeby possa ser interrompido. No entanto, isso pode ser reparado removendo a chave comprometida no EscapeHatch 1 de x multisig e DAppGod. Feito isso, basta enviar os tokens giveth de volta para o endere\xe7o de onde vieram, um cen\xe1rio semelhante \xe9 poss\xedvel na Mainnet. O EscapeHatch Caller s\xf3 pode mover dinheiro para um destino de fuga e para nenhum outro lugar. Se uma chave estiver comprometida, a pior coisa que eles podem fazer \xe9 remover todos os propriet\xe1rios e eles mesmos da multisig do EscapeHatch, mas o propriet\xe1rio 6 de 11 multisig na rede principal ainda pode chamar o EscapeHatch e substituir o chamador do EscapeHatch e o multisig 3 de 5 no rinkeby tamb\xe9m pode."),(0,t.kt)("p",null,(0,t.kt)("strong",{parentName:"p"},"O financiamento multisig tem um bug e pode ser assumido (como o hack de paridade) ou 4 chaves de 7 das chaves est\xe3o comprometidas:")),(0,t.kt)("p",null,"Isso \xe9 extremamente improv\xe1vel, mas se isso acontecer, haver\xe1 uma perda de fundos. A perda, no entanto, n\xe3o seria catastr\xf3fica, pois os fundos s\xe3o divididos entre a bridge e o multisig."),(0,t.kt)("p",null,(0,t.kt)("strong",{parentName:"p"},"O Bridge na mainnet tem um bug que permite que outra pessoa assuma o controle:")),(0,t.kt)("p",null,"O atraso de 48 horas s\xf3 pode ser reduzido para 25 horas. O Security Guard ainda pode  atrasar quaisquer pagamentos, mas ele pode ser substitu\xeddo pelo propriet\xe1rio. Os fundos podem ser escapados dentro de 25 horas nesse cen\xe1rio."),(0,t.kt)("p",null,(0,t.kt)("strong",{parentName:"p"},"DAppGod Multisig na testnet decide assumir:")),(0,t.kt)("p",null,"Se isso ocorrer, o EscapeHatch da bridge evitar\xe1 qualquer perda de fundos e a configura\xe7\xe3o da testnet poder\xe1 ser reimplantada manualmente."),(0,t.kt)("p",null,(0,t.kt)("strong",{parentName:"p"},"E se a chave do Security Guard e a Bridge Key Controller forem comprometidos (ou seus detentores conspirarem para roubar fundos)"),":"),(0,t.kt)("p",null,"O propriet\xe1rio multisig pode cancelar pagamentos e estender o atraso para mais de 48 horas. Por\xe9m, eles provavelmente n\xe3o precisariam porque os fundos da bridge podem ser escapados para o multisig de financiamento. Esse \xe9 o \xfanico cen\xe1rio que pode ser um risco s\xe9rio para os fundos no cofre da bridge. Isso pode ser evitado dentro de 48 horas ap\xf3s o in\xedcio do evento devido ao atraso padr\xe3o. Os fundos podem ser escapados durante esse per\xedodo."),(0,t.kt)("p",null,(0,t.kt)("strong",{parentName:"p"},"Por fim, o que acontece se o Event Listener ficar off-line imediatamente antes de qualquer um dos ataques mencionados acima que acionam alarmes no comprometimento?")),(0,t.kt)("p",null,"O Security Guard deve ver quaisquer transa\xe7\xf5es suspeitas e ser capaz de atrasar os pagamentos at\xe9 que sejam resolvidos."))}m.isMDXComponent=!0}}]);